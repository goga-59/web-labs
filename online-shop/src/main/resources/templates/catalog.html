<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WOT Premium –ú–∞–≥–∞–∑–∏–Ω</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<header>
    <h1>WOT Premium –ú–∞–≥–∞–∑–∏–Ω</h1>
    <nav>
        <ul>
            <li><a href="/">–ù–æ–≤–æ—Å—Ç–∏</a></li>
            <li><a href="/catalog">–ö–∞—Ç–∞–ª–æ–≥</a></li>
            <li><a href="/info">–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞</a></li>
            <li><a href="/contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
        </ul>
    </nav>
</header>

<section class="catalog-section">
    <h2>–ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–µ–º–∏—É–º —Ç–∞–Ω–∫–æ–≤</h2>
    <div class="catalog">
        <div class="product-container" th:each="productCard : ${productCards}">
            <img th:src="@{${productCard.image}}" alt="–¢–∞–Ω–∫">
            <h3 th:text="${productCard.title}"></h3>
            <p th:text="${productCard.description}"></p>
            <p>–¶–µ–Ω–∞: <span th:text="${productCard.price}"></span> —Ä—É–±.</p>
        </div>
    </div>
</section>

<button id="open-order-form">üõí –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>

<div id="order-form-modal" class="modal" style="display: none;">
    <div class="modal-content">
        <span class="close-button">&times;</span>
        <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
        <form action="/submit-order" method="post">
            <div class="form-group">
                <label for="customerName">–í–∞—à–µ –∏–º—è:</label>
                <input type="text" id="customerName" name="customerName" required>
            </div>

            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>

            <div class="form-group">
                <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                <input type="tel" id="phone" name="phone" required>
            </div>

            <div class="form-group">
                <label for="tankNick">–¢–∞–Ω–∫–æ–≤—ã–π –Ω–∏–∫:</label>
                <input type="text" id="tankNick" name="tankNick" required>
            </div>

            <div id="products-container">
                <div class="form-group product-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä:</label>
                    <select name="product[]" required>
                        <option th:each="tank : ${productCards}" th:value="${tank.id}" th:text="${tank.title}"></option>
                    </select>
                    <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                    <input type="number" name="quantity[]" min="1" value="1" required>
                    <button type="button" class="remove-product">üóëÔ∏è</button>
                </div>
            </div>

            <button type="button" id="add-product">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>

            <div class="form-group">
                <label for="paymentMethod">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:</label>
                <select id="paymentMethod" name="paymentMethod">
                    <option value="card">–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</option>
                    <option value="wallet">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –∫–æ—à–µ–ª–µ–∫</option>
                    <option value="crypto">–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞</option>
                </select>
            </div>

            <div class="form-group">
                <label for="comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
                <textarea id="comment" name="comment" rows="3"></textarea>
            </div>

            <button type="submit" class="submit-button">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </form>
    </div>
</div>

<footer>
    <p>&copy; 2025 WOT Premium –ú–∞–≥–∞–∑–∏–Ω</p>
</footer>

<script th:inline="javascript">
    document.getElementById('open-order-form').addEventListener('click', function () {
        document.getElementById('order-form-modal').style.display = 'flex';
    });

    document.querySelector('.close-button').addEventListener('click', function () {
        document.getElementById('order-form-modal').style.display = 'none';
    });

    document.getElementById('add-product').addEventListener('click', function () {
        let container = document.getElementById('products-container');
        let newProduct = document.createElement('div');
        newProduct.classList.add('form-group', 'product-group');
        let productCards = /*[[${productCards}]]*/ [];

        let selectHTML = '<label>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä:</label><select name="product[]" required>';
        productCards.forEach(tank => {
            selectHTML += `<option value="${tank.id}">${tank.title}</option>`;
        });
        selectHTML += '</select>';

        newProduct.innerHTML = `
        ${selectHTML}
        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
        <input type="number" name="quantity[]" min="1" value="1" required>
        <button type="button" class="remove-product">üóëÔ∏è</button>
    `;

        container.appendChild(newProduct);
    });

    document.addEventListener('click', function (event) {
        if (event.target.classList.contains('remove-product')) {
            event.target.parentElement.remove();
        }
    });
</script>
</body>
</html>
