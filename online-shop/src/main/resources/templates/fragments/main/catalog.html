<div th:fragment="content">

    <script src="/js/catalog.js"></script>

    <section class="catalog-section">
    <h2>–ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–µ–º–∏—É–º —Ç–∞–Ω–∫–æ–≤</h2>
    <div class="catalog">
        <div class="product-container" th:each="product : ${productList}">
            <img th:src="@{${product.image}}" alt="–¢–∞–Ω–∫">
            <h3 th:text="${product.title}"></h3>
            <p th:text="${product.description}"></p>
            <p>–¶–µ–Ω–∞: <span th:text="${product.price}"></span> —Ä—É–±.</p>
        </div>
    </div>
    </section>

    <button id="open-order-form">üõí –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>

    <div id="order-form-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
            <form action="/submit/order" method="post">
                <div class="form-group">
                    <label for="customerName">–í–∞—à–µ –∏–º—è:</label>
                    <input type="text" id="customerName" name="customerName" required>
                </div>

                <div class="form-group">
                    <label for="birthDate">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</label>
                    <input type="date" id="birthDate" name="birthDate" required>
                </div>

                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required>
                </div>

                <div class="form-group">
                    <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>

                <div class="form-group">
                    <label for="nickname">–¢–∞–Ω–∫–æ–≤—ã–π –Ω–∏–∫:</label>
                    <input type="text" id="nickname" name="nickname" required>
                </div>

                <div id="products-container">
                    <div class="form-group product-group">
                        <label for="product">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä:</label>
                        <select id="product" name="product" required onchange="updateForm()">
                            <option value="" data-price="0" selected disabled>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä</option>
                            <option th:each="product : ${productList}" th:value="${product.id}" th:data-price="${product.price}" th:text="${product.title}"></option>
                        </select>
                        <label for="quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                        <input id="quantity" type="number" name="quantity" min="0" value="" required oninput="this.value = this.value.replace(/[^0-9]/g, ''); updateForm();">
                        </div>
                </div>

                <div class="form-group">
                    <label for="paymentMethod">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:</label>
                    <select id="paymentMethod" name="paymentMethod">
                        <option value="card">–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</option>
                        <option value="wallet">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –∫–æ—à–µ–ª–µ–∫</option>
                        <option value="crypto">–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
                    <textarea id="comment" name="comment" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label for="total-price">–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</label>
                    <span id="total-price">0 —Ä—É–±.</span>
                    <input type="hidden" id="total-price-input" name="totalPrice">
                </div>

                <button type="submit" class="submit-button">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
            </form>
        </div>
    </div>
</div>